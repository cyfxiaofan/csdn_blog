{% extends '../base.html' %}
{% load static %}
{% block title  %}新增管理员{% endblock %}
{% block link %}
    <!-- Favicon-->
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">

    <!-- Bootstrap Core Css -->
    <link href="{% static 'plugins/bootstrap/css/bootstrap.css' %}" rel="stylesheet">

    <!-- Waves Effect Css -->
    <link href="{% static 'plugins/node-waves/waves.css' %}" rel="stylesheet" />

    <!-- Animation Css -->
    <link href="{% static 'plugins/animate-css/animate.css' %}" rel="stylesheet" />

    <!-- Custom Css -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
    <link href="{% static 'css/themes/all-themes.css' %}" rel="stylesheet" />
    <!-- Colorpicker Css -->
    <link href="{% static 'plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.css' %}" rel="stylesheet" />

    <!-- Dropzone Css -->
    <link href="{% static 'plugins/dropzone/dropzone.css' %}" rel="stylesheet">

    <!-- Multi Select Css -->
    <link href="{% static 'plugins/multi-select/css/multi-select.css' %}" rel="stylesheet">

    <!-- Bootstrap Spinner Css -->
    <link href="{% static 'plugins/jquery-spinner/css/bootstrap-spinner.css' %}" rel="stylesheet">

    <!-- Bootstrap Tagsinput Css -->
    <link href="{% static 'plugins/bootstrap-tagsinput/bootstrap-tagsinput.css' %}" rel="stylesheet">

    <!-- Bootstrap Select Css -->
    <link href="{% static 'plugins/bootstrap-select/css/bootstrap-select.css' %}" rel="stylesheet" />

    <!-- noUISlider Css -->
    <link href="{% static 'plugins/nouislider/nouislider.min.css' %}" rel="stylesheet" />
 <link href="{% static 'css/bannerstyle.css' %}" rel="stylesheet">
{% endblock %}



{% block main_body %}
<div class="container-fluid">
      <ol class="breadcrumb breadcrumb-bg-orange">
				<li><a href="">首页</a></li>
				<li class="active">新增管理员用户</li>
      </ol>

      <!-- 文章基础信息编辑 -->
      <div class="row clearfix">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <div class="card">
                  <div class="body">
                      <div class="header">

                          <h2>
                              <strong><i class="material-icons" style="font-size: 25px">account_circle</i>&nbsp;&nbsp; 新增管理员</strong>
                              <small>请在下方填写管理员的基本信息</small>
                          </h2>
                      </div>
                      <br>
                      <form id="mainFrom" action="" method="post">
                      {% csrf_token %}
                        <!--用户名-->
                      <div class="row clearfix">

                          <div class="col-md-6">
                            <p>
                              <b>管理员名称</b>
                            </p>
                              <div class="input-group">
                                  <span class="input-group-addon">
                                      <i class="material-icons">perm_identity</i>
                                  </span>
                                  <div class="col-md-8">
                                      <div class="form-line">
                                          <input type="text" class="form-control date" placeholder="请输入管理员名称" name="username" >
                                     </div>
                                  </div>
                                  <div class="col-md-4">
                                      <span id="links_name" style="color: #777777"></span>
                                  </div>
                              </div>
                          </div>


                       <div style="margin-left: 790px;margin-top: 30px">
                          <div class="switch cgsta">
                          <label>普通管理员<input class="ltype"  type="checkbox"  ><span id="corse" class="lever"></span>超级管理员</label>
                              <input type="text"  name="is_super" hidden value="0">
                          </div>
                      </div>

                    </div>

                      <!--密码-->
                      <div class="row clearfix">

                          <div class="col-md-6">
                            <p>
                            <b>用户密码</b>
                          </p>
                              <div class="input-group">
                                  <span class="input-group-addon">
                                      <i class="material-icons">toys</i>
                                  </span>
                              <div class="col-md-8">
                                  <div class="form-line">
                                      <input type="password" class="form-control date" placeholder="请输入密码" name="password" >
                                  </div>
                                 <div style="margin-left: 490px;margin-top: -26px">
                                      <span id="pwd" style="color: #777777"></span>
                                  </div>
                              </div>

                          </div>
                      </div>
                      <!--确认密码-->
                     <div class="row clearfix">
                          <div class="col-md-6">
                            <p>
                            <b>确认密码</b>
                          </p>
                              <div class="input-group">
                                  <span class="input-group-addon">
                                      <i class="material-icons">toys</i>
                                  </span>
                                  <div class="col-md-8">
                                  <div class="form-line">
                                      <input type="password" class="form-control date" placeholder="请确认密码" name="repassword" >
                                  </div>
                              </div>
                          </div>
                          </div>
                     </div>
                      </div>

                          <!--邮箱-->
                   <div class="row clearfix">
                          <div class="col-md-6">
                            <p>
                            <b>用户邮箱</b>
                          </p>
                              <div class="input-group">
                                  <span class="input-group-addon">
                                      <i class="material-icons">email</i>
                                  </span>
                                  <div class="col-md-8">
                                  <div class="form-line">
                                      <input type="email" class="form-control date" placeholder="请输入邮箱" name="email" >
                                  </div>
                              </div>
                          </div>
                          </div>

                     </div>

                      <div class="row clearfix">
                          <div class="col-md-12">
                              <a type="button" id="submin_btn" class="btn bg-red  waves-effect"><i class="material-icons">send</i>&nbsp;提交</a>
                          </div>
                      </div>

                      </form>
                  </div>
              </div>
          </div>
      </div>
  </div>
{% endblock %}

{% block endlinks %}


    <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>

    <!-- Bootstrap Core Js -->
    <script src="{% static 'plugins/bootstrap/js/bootstrap.js' %}"></script>

    <!-- Select Plugin Js -->
    <script src="{% static 'plugins/bootstrap-select/js/bootstrap-select.js' %}"></script>

    <!-- Slimscroll Plugin Js -->
    <script src="{% static 'plugins/jquery-slimscroll/jquery.slimscroll.js' %}"></script>

    <!-- Bootstrap Colorpicker Js -->
    <script src="{% static '' %}plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>

    <!-- Dropzone Plugin Js -->
    <script src="{% static 'plugins/dropzone/dropzone.js' %}"></script>

    <!-- Input Mask Plugin Js -->
    <script src="{% static 'plugins/jquery-inputmask/jquery.inputmask.bundle.js' %}"></script>

    <!-- Multi Select Plugin Js -->
    <script src="{% static 'plugins/multi-select/js/jquery.multi-select.js' %}"></script>

    <!-- Jquery Spinner Plugin Js -->
    <script src="{% static 'plugins/jquery-spinner/js/jquery.spinner.js' %}"></script>

    <!-- Waves Effect Plugin Js -->
    <script src="{% static 'plugins/node-waves/waves.js' %}"></script>



    <!-- Bootstrap Tags Input Plugin Js -->
    <script src="{% static 'plugins/bootstrap-tagsinput/bootstrap-tagsinput.js' %}"></script>

    <!-- noUISlider Plugin Js -->


    <!-- TinyMCE -->
    <script src="{% static 'plugins/tinymce/tinymce.js' %}"></script>

    <!-- Custom Js -->
    <script src="{% static 'js/admin.js' %}"></script>


    <!-- Demo Js -->
    <script src="{% static 'js/demo.js' %}"></script>
   <script src="{% static 'plugins/sweetalert/sweetalert.min.js' %}"></script>
  <script type="text/javascript">{{ jscode|default:"" |safe }}</script>
<script>
    //********************************************************************************

    //验证
    var checkpassword = false;
    var linksname = false;
    //判空
      var firstpwd ='';

    $('[name=password]').blur(function () {
        if(check($(this).val())){
            firstpwd=$(this).val()
            console.log(firstpwd)
        }else{
            layer.msg('密码不能为空或包含空格',{anim:6,icon:2})
            checkpassword=false
        }
    });
    $('[name=repassword]').blur(function () {
        if($(this).val()===firstpwd){
            $('#pwd').css('color','green')
            $('#pwd').html('<i class="material-icons" style="font-size: 15px">done</i>&nbsp;&nbsp;&nbsp;')
            checkpassword=true
        }else{
            layer.msg('两次输入密码不一致',{anim:6,icon:2})
            $('#pwd').css('color','red')
            $('#pwd').html('<i class="material-icons" style="font-size: 15px">error_outline</i>&nbsp;&nbsp;&nbsp;')
            checkpassword=false
        }
    });
    //验证name
    $('[name="username"]').click(function () {
        $('#links_name').css('color','#777777');
        $('#links_name').html('<i class="material-icons" style="font-size: 15px">add_alert</i>&nbsp;&nbsp;&nbsp;请输入Username')
    });
    $('[name="username"]').blur(function () {
        if(check($(this).val())){
             $.ajax({
                async: true,
                type:'get',
                url:"{% url 'adminperssion:checkadminperssionuser' %}",
                dataType:'json',
                data:{'adminusername':$(this).val()},
                success:function (data) {
                    if(data.msg==1){
                        $('#links_name').css('color','#777777')
                        $('#links_name').html('<i class="material-icons" style="font-size: 15px">done</i>&nbsp;&nbsp;&nbsp;Username验证通过')
                        linksname = true
                    }else{
                        $('#links_name').css('color','red')
                        $('#links_name').html('<i class="material-icons" style="font-size: 15px">error_outline</i>&nbsp;&nbsp;Username已重复！')
                        linksname = false
                    }
                }
            })
        }else{
            $('#links_name').css('color','red')
            $('#links_name').html('<i class="material-icons" style="font-size: 15px">error_outline</i>&nbsp;&nbsp;Username不能为空！')
            linksname=false
        }

    })


    function check(obj) {
        // var isspace =/\s/
        if(obj.indexOf(' ') == -1&& obj !=''){
            return true
        }else{
            return false
        }
    }

    $('#submin_btn').click(function () {
        if(linksname && checkpassword){
            $('#mainFrom').submit()
        }else{
            if(linksname == false){
                 $('#links_name').css('color','red')
                $('#links_name').html('<i class="material-icons" style="font-size: 15px">error_outline</i>&nbsp;&nbsp;Username不正确！')
                swal('请输入Username！','Username不能为空且不能重复！','error')
            }else if(checkpassword==false){
                layer.msg('密码输入有误',{anim:6,icon:2})
                 $('#pwd').css('color','red')
                 $('#pwd').html('<i class="material-icons" style="font-size: 15px">error_outline</i>')
            }
        }
    })
</script>
               <script>
                              $('.cgsta').click(function () {
                                  if ($("#corse").css('backgroundColor') === ('rgb(129, 129, 129)')){
                                        $('[name=is_super]').val('1')
                                    }else{
                                        $('[name=is_super]').val('0')
                                     }
                                     var lsd = $('[name=is_super]').val();
                                  console.log(lsd)
                              })
                          </script>
{% endblock %}